{"version":3,"sources":["touch.ts"],"names":[],"mappings":";;;;;AAAA,+BAAmC;AAE7B,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAA;AAGzC;IAAmC,yBAAY;IAA/C;;IAmCA,CAAC;IAjCG,sBAAM,GAAN;QACG,IAAI,CAAC,aAAa,EAAE,CAAA;IACvB,CAAC;IAED,6BAAa,GAAb;QAAA,iBAYC;QAXG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,UAAC,CAAsB;YAC7D,IAAI,UAAU,GAAG,CAAC,CAAC,gBAAgB,EAAE,CAAA;YACrC,IAAI,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,CAAA;YAC9B,IAAI,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,CAAA;YAChC,YAAY;YACZ,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;YAClC,IAAI,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAA;YAC/C,kCAAkC;YAClC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC,CAAA;YACpC,KAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;QAChC,CAAC,EAAE,IAAI,CAAC,CAAA;IACZ,CAAC;IAED,gCAAgB,GAAhB,UAAkB,KAAa;QAC3B,qDAAqD;QACrD,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YAC7B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAU,CAAC,KAAK,CAAC,CAAA;SACnC;aAAM,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE;YACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAU,CAAC,EAAE,CAAC,CAAA;SAChC;aAAM,IAAI,KAAK,KAAK,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YACrC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAU,CAAC,IAAI,CAAC,CAAA;SAClC;aAAM,IAAI,KAAK,KAAK,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE;YACnD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAU,CAAC,IAAI,CAAC,CAAA;SAClC;aAAM;YACH,EAAE,CAAC,KAAK,CAAC,6BAAO,KAAO,CAAC,CAAA;SAC3B;IACL,CAAC;IAjCgB,KAAK;QADzB,OAAO;OACa,KAAK,CAmCzB;IAAD,YAAC;CAnCD,AAmCC,CAnCkC,EAAE,CAAC,SAAS,GAmC9C;kBAnCoB,KAAK","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["import { TouchEvent } from \"./enum\"\n\nconst {ccclass, property} = cc._decorator\n\n@ccclass\nexport default class Touch extends cc.Component {\n\n    onLoad () {\n       this.registerEvent()\n    }\n\n    registerEvent () {\n        this.node.on(cc.Node.EventType.TOUCH_END, (e: cc.Event.EventTouch) => {\n            let startPoint = e.getStartLocation()\n            let endPonit = e.getLocation()\n            let v = endPonit.sub(startPoint)\n            // cc.log(v)\n            let radians = Math.atan2(v.y, v.x)\n            let degrees = cc.misc.radiansToDegrees(radians)\n            /** 将角度划分 8 块区域，方便处理，注意恰好 360 度 */\n            let index = Math.floor(degrees / 45)\n            this.emitEventByIndex(index)\n        }, this)\n    }\n\n    emitEventByIndex (index: number) {\n        // main 上有对应监听，注意如果两个脚本没同时绑定在一个节点上，此处就不能用 this.node 了\n        if (index === 0 || index === -1) {\n            this.node.emit(TouchEvent.RIGHT)\n        } else if (index === 1 || index === 2) {\n            this.node.emit(TouchEvent.UP)\n        } else if (index === -2 || index === -3) {\n            this.node.emit(TouchEvent.DOWN)\n        } else if (index === -4 || index === 3 || index === 4) {\n            this.node.emit(TouchEvent.LEFT)\n        } else {\n            cc.error(`无此方向${index}`)\n        }\n    }\n\n}\n"]}